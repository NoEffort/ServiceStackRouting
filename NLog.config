<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.nlog-project.org/schemas/NLog.xsd NLog.xsd"
      autoReload="true"
      throwExceptions="false"
      internalLogLevel="Off" internalLogFile="c:\temp\nlog-internal.log">

  <targets async="true">
    <target name="BlackHole" xsi:type="Null" formatMessage="false" />

    <target name="File" xsi:type="File"
            layout="${longdate} ${level:uppercase=true:padding=-5} ${machinename} ${callsite:cleanNamesOfAnonymousDelegates=True:cleanNamesOfAsyncContinuations=True}  ${message}  ${exception:format=tostring}"
            fileName="${basedir}/Logs/today.log"
            archiveFileName="${basedir}/Logs/previous-{#}.log"
            archiveEvery="Day"
            archiveNumbering="Rolling"
            maxArchiveFiles="4"
            concurrentWrites="true"
            keepFileOpen="false" />
  </targets>

  <rules>
    <!-- 
      OrmLite outputs a massive amount of SQL queries in debug mode, so send all of those log entries
      to the black hole. This allows us to still capture our own debug level entries.
      If you need the SQL that was generated by OrmLite, comment out the logger temporarily,
      but be sure to turn it back on!
      The logger name is the source of the events, which can be determined by turning on NLog's
      internal logging to find which logger is writing to which target for each level.
    -->
    <logger name="*OrmLiteResultsFilterExtensions*" minlevel="Debug" writeTo="BlackHole" final="true" />
    <logger name="*OrmLiteReadCommandExtensions*" minlevel="Debug" writeTo="BlackHole" final="true" />
    <logger name="*OrmLiteWriteCommandExtensions*" minlevel="Debug" writeTo="BlackHole" final="true" />
    <logger name="*ServiceController*" levels="Trace,Debug" writeTo="BlackHole" final="true" />
    <!-- Don't log CreateRequestAsync/requestParams entries for every request -->
    <logger name="*HttpAsyncTaskHandler*" levels="Trace,Debug" writeTo="BlackHole" final="true" />

    <logger name="*" minlevel="Debug" writeTo="File" />
  </rules>
</nlog>
